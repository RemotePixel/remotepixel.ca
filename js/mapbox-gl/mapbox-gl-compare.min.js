"use strict";function Compare(d,c){mapboxgl.util.bindHandlers(this);var e=document.createElement("div");e.className="compare-swiper";e.addEventListener("mousedown",this._onDown);e.addEventListener("touchstart",this._onDown);var f=document.createElement("i");f.className="fa fa-arrows-h";e.appendChild(f);this._container=document.createElement("div");this._container.className="mapboxgl-compare";this._container.appendChild(e);d.getContainer().appendChild(this._container);this._clippedMap=c;this._bounds=c.getContainer().getBoundingClientRect();this._setPosition(this._bounds.width/2);this._syncMaps(d,c);c.on("resize",function(){var a=this._bounds.width/c.getContainer().getBoundingClientRect().width;this._bounds=c.getContainer().getBoundingClientRect();if(this._x){this._setPosition(this._x/a)}}.bind(this))}Compare.prototype={_copyPosition:function(d,c){c.jumpTo({center:d.getCenter(),zoom:d.getZoom(),bearing:d.getBearing(),pitch:d.getPitch()})},_syncMaps:function(d,c){var f=this._copyPosition;function g(){c.off("move",e);f(d,c);c.on("move",e)}function e(){d.off("move",e);f(c,d);d.on("move",e)}d.on("move",g);c.on("move",e)},_onDown:function(a){if(a.touches){document.addEventListener("touchmove",this._onMove);document.addEventListener("touchend",this._onTouchEnd)}else{document.addEventListener("mousemove",this._onMove);document.addEventListener("mouseup",this._onMouseUp)}},_setPosition:function(a){var b="translate("+a+"px, 0)";this._container.style.transform=b;this._container.style.WebkitTransform=b;this._clippedMap.getContainer().style.clip="rect(0, 999em, "+this._bounds.height+"px,"+a+"px)";this._x=a},_onMove:function(a){this._setPosition(this._getX(a))},_onMouseUp:function(){document.removeEventListener("mousemove",this._onMove);document.removeEventListener("mouseup",this._onMouseUp)},_onTouchEnd:function(){document.removeEventListener("touchmove",this._onMove);document.removeEventListener("touchend",this._onTouchEnd)},_getX:function(b){b=b.touches?b.touches[0]:b;var a=b.clientX-this._bounds.left;if(a<0){a=0}if(a>this._bounds.width){a=this._bounds.width}return a}};if(window.mapboxgl){mapboxgl.Compare=Compare}else{if(typeof module!=="undefined"){module.exports=Compare}};