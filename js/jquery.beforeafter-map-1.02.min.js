(function(a){a.fn.extend({beforeAfter:function(e,b,c){var f={animateIntro:true,introDelay:10,introDuration:100,introPosition:0.5,pos:0.5,beforeLinkText:"Show only before",afterLinkText:"Show only after",imagePath:"/images/",cursor:"pointer",clickSpeed:600,linkDisplaySpeed:200,dividerColor:"rgba(0,0,0,0.7)",keypressAmount:20,onReady:function(){},changeOnResize:true,permArrows:false,textOffset:25,arrowTop:0.5,arrowLeftOffset:0,arrowRightOffset:0};var c=a.extend(f,c);var d=Math.round(Math.random()*100000000);return this.each(function(){var g=c;var k=a(this);var l=a("div:first",k).width();var q=a("div:first",k).height();var j=-24;var s=24;var t=a("div:first",k),u=a("div:last",k),i=a(e._container).attr("id"),n=a(b._container).attr("id");e.options.inertia=false;b.options.inertia=false;a(k).prepend('<div id="dragwrapper'+d+'"><div id="drag'+d+'"><img width="8" height="56" alt="handle" src="'+g.imagePath+'handle.gif" id="handle'+d+'" /></div></div>');a("#dragwrapper"+d).css({opacity:0.25,position:"absolute",left:"50%","z-index":"20"}).width(a("#handle"+d).width()).css({height:"100%"}).css("left","-="+(a("#handle"+d).width()/2)+"px");a(e._container).height(q).width(l*g.introPosition).css({position:"absolute",overflow:"hidden",left:"0px","z-index":"10"});a(b._container).height(q).width(l).css({position:"absolute",overflow:"hidden",right:"0px"});a("#drag"+d).width(2).height(q).css({background:g.dividerColor,position:"absolute",left:"3px",height:"100%"});a(e._container).css({position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%"});a(b._container).css({position:"absolute",top:"0px",right:"0px",width:"100%",height:"100%"});a("#handle"+d).css({"z-index":"100",position:"relative",cursor:g.cursor,top:"50%",left:"-3px"}).css("top","-="+(a("#handle"+d).height()/2)+"px");a(k).append('<img src="'+g.imagePath+'lt-small.png" id="lt-arrow'+d+'"><img src="'+g.imagePath+'rt-small.png" id="rt-arrow'+d+'">');a(k).append('<h4 id="lt-text'+d+'"></h4>');a(k).append('<h4 id="rt-text'+d+'"></h4>');w=a(k).width();a("#lt-text"+d).css({"z-index":"20",position:"absolute",top:"10px",right:w-parseInt(a("#dragwrapper"+d).css("left"))}).css("right","+="+g.textOffset+"px");a("#rt-text"+d).css({"z-index":"20",position:"absolute",top:"10px",left:parseInt(a("#dragwrapper"+d).css("left"))}).css("left","+="+g.textOffset+"px");if(g.changeOnResize){var r;a(window).on("orientationchange pageshow resize",function(){w=a(k).width();h=a(k).height();a(e._container).width(w).height(h);a(b._container).width(w).height(h);e.invalidateSize();b.invalidateSize();clearInterval(r);a("#dragwrapper"+d).css({left:g.pos*100+"%",height:"100%"});a("#handle"+d).css({position:"relative",cursor:g.cursor,top:"50%",left:"-3px"}).css("top","-="+(a("#handle"+d).height()/2)+"px");a("#lt-arrow"+d).css({top:"50%",left:parseInt(a("#dragwrapper"+d).css("left"))+g.arrowLeftOffset+j+"px"}).css("top","-="+a("#lt-arrow"+d).height()/2+"px");a("#rt-arrow"+d).css({top:"50%",left:parseInt(a("#dragwrapper"+d).css("left"))+g.arrowRightOffset+s+"px"}).css("top","-="+a("#rt-arrow"+d).height()/2+"px");a("#lt-text"+d).css({right:w-parseInt(a("#dragwrapper"+d).css("left"))}).css("right","+="+g.textOffset+"px");a("#rt-text"+d).css({left:parseInt(a("#dragwrapper"+d).css("left"))}).css("left","+="+g.textOffset+"px");r=setInterval(function(){a(e._container).width(parseInt(a("#dragwrapper"+d).css("left"))+4);if(a(e._container).width()!=w){clearInterval(r)}},100)})}a("#dragwrapper"+d).draggable({containment:k,drag:m,stop:m}).css("-ms-touch-action","none");function m(){if(!g.permArrows){a("#lt-arrow"+d+", #rt-arrow"+d).stop().css("opacity",0)}a("div:eq(2)",k).width(parseInt(a(this).css("left"))+4);if(g.permArrows){a("#lt-arrow"+d).css({"z-index":"20",position:"absolute",top:"50%",left:parseInt(a("#dragwrapper"+d).css("left"))+g.arrowLeftOffset+j+"px"}).css("top","-="+a("#lt-arrow"+d).height()/2+"px");a("#rt-arrow"+d).css({"z-index":"20",position:"absolute",top:"50%",left:parseInt(a("#dragwrapper"+d).css("left"))+g.arrowRightOffset+s+"px"}).css("top","-="+a("#rt-arrow"+d).height()/2+"px")}g.pos=parseInt(a(this).css("left"))/a(k).width();w=a(k).width();a("#lt-text"+d).css({right:w-parseInt(a("#dragwrapper"+d).css("left"))}).css("right","+="+g.textOffset+"px");a("#rt-text"+d).css({left:parseInt(a("#dragwrapper"+d).css("left"))}).css("left","+="+g.textOffset+"px")}if(g.animateIntro){a("div:eq(2)",k).width(l);a("#dragwrapper"+d).css("left",l-(a("#dragwrapper"+d).width()/2)+"px");setTimeout(function(){a("#dragwrapper"+d).css({opacity:1}).animate({left:(l*g.introPosition)-(a("#dragwrapper"+d).width()/2)+"px"},g.introDuration,function(){a("#dragwrapper"+d).animate({opacity:0.25},1000)});a("div:eq(2)",k).width(l).animate({width:l*g.introPosition+"px"},g.introDuration,function(){p();g.onReady.call(this)})},g.introDelay)}else{p();g.onReady.call(this)}function p(){if(g.permArrows){a("#lt-arrow"+d).css({"z-index":"20",position:"absolute",top:"50%",left:parseInt(a("#dragwrapper"+d).css("left"))+g.arrowLeftOffset+j+"px"}).css("top","-="+a("#lt-arrow"+d).height()/2+"px");a("#rt-arrow"+d).css({"z-index":"20",position:"absolute",top:"50%",left:parseInt(a("#dragwrapper"+d).css("left"))+g.arrowRightOffset+s+"px"}).css("top","-="+a("#rt-arrow"+d).height()/2+"px")}a(k).hover(function(){if(!g.permArrows){a("#lt-arrow"+d).stop().css({"z-index":"20",position:"absolute",top:"50%",left:parseInt(a("#dragwrapper"+d).css("left"))+g.arrowLeftOffset+j+6+"px"}).animate({opacity:1,left:parseInt(a("#lt-arrow"+d).css("left"))-6+"px"},200).css("top","-="+a("#lt-arrow"+d).height()/2+"px");a("#rt-arrow"+d).stop().css({position:"absolute",top:"50%",left:parseInt(a("#dragwrapper"+d).css("left"))+g.arrowRightOffset+s-6+"px"}).animate({opacity:1,left:parseInt(a("#rt-arrow"+d).css("left"))+6+"px"},200).css("top","-="+a("#rt-arrow"+d).height()/2+"px")}a("#dragwrapper"+d).animate({opacity:1},200)},function(){if(!g.permArrows){a("#lt-arrow"+d).animate({opacity:0,left:parseInt(a("#lt-arrow"+d).css("left"))+g.arrowLeftOffset-6+"px"},350).css({top:"50%"}).css("top","-="+a("#lt-arrow"+d).height()/2+"px");a("#rt-arrow"+d).animate({opacity:0,left:parseInt(a("#rt-arrow"+d).css("left"))+g.arrowRightOffset+6+"px"},350).css({top:"50%"}).css("top","-="+a("#rt-arrow"+d).height()/2+"px")}a("#dragwrapper"+d).animate({opacity:0.25},350)});a(k).one("mousemove",function(){a("#dragwrapper"+d).stop().animate({opacity:1},500)})}})}})})(jQuery);