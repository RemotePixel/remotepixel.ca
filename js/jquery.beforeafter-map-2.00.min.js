(function(a){a.fn.extend({beforeAfter:function(f,c,b){var g={introDelay:100,introDuration:500,introPosition:0.5,animateIntro:true,pos:0.5,sliderwidth:4,beforeLinkText:"Show only before",afterLinkText:"Show only after",cursor:"pointer",clickSpeed:600,linkDisplaySpeed:200,dividerColor:"rgba(255, 255, 255, 1)",keypressAmount:20,onReady:function(){},changeOnResize:true,textOffset:25};var d=a.extend(g,b);var e=Math.round(Math.random()*100000000);return this.each(function(){var h=d;var j=a(this);var k=a("div:first",j).width();var p=a("div:first",j).height();var s=a("div:first",j),t=a("div:last",j),i=a(f._container).attr("id"),m=a(c._container).attr("id");f.options.inertia=false;c.options.inertia=false;a(j).prepend('<div id="dragwrapper'+e+'"><div id="drag'+e+'"></div></div>');a("#dragwrapper"+e).css({opacity:0.25,position:"absolute",right:"0px",height:"100%",width:h.sliderwidth+"px","z-index":20});a(f._container).css({position:"absolute",overflow:"hidden",left:"0px","z-index":"10",height:"100%",width:"100%"});a(c._container).css({position:"absolute",overflow:"hidden",right:"0px",height:"100%",width:"100%"});a("#drag"+e).css({background:h.dividerColor,position:"absolute",left:"0px",height:"100%",width:"100%"});a(f._container).css({position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%"});a(c._container).css({position:"absolute",top:"0px",right:"0px",width:"100%",height:"100%"});a(j).append('<span id="lt-text"></span>');a(j).append('<span id="rt-text"></span>');var r=a(j).width();a("#lt-text").css({position:"absolute","z-index":"20",top:"10px",right:parseInt(r-a("#dragwrapper"+e).offset().left+h.textOffset)+"px"});a("#rt-text").css({position:"absolute","z-index":"20",top:"10px",left:parseInt(a("#dragwrapper"+e).offset().left+h.textOffset)+"px"});if(h.changeOnResize){var q;a(window).on("orientationchange pageshow resize",function(){var o=a(j).width();var u=a(j).height();a(f._container).width(o).height(u);a(c._container).width(o).height(u);f.invalidateSize();c.invalidateSize();clearInterval(q);a("#dragwrapper"+e).css({left:h.pos*100+"%"});a("#lt-text").css({right:parseInt(o-a("#dragwrapper"+e).offset().left+h.textOffset)+"px"});a("#rt-text").css({left:parseInt(a("#dragwrapper"+e).offset().left+h.textOffset)+"px"});q=setInterval(function(){a(f._container).width(parseInt(a("#dragwrapper"+e).css("left"))+4);if(a(f._container).width()!=o){clearInterval(q)}},100)})}a("#dragwrapper"+e).draggable({containment:j,drag:l,stop:l}).css("-ms-touch-action","none");function l(){a("div:eq(2)",j).width(parseInt(a(this).css("left"))+4);h.pos=parseInt(a(this).css("left"))/a(j).width();var o=a(j).width();a("#lt-text").css({right:parseInt(o-a("#dragwrapper"+e).offset().left+h.textOffset)+"px"});a("#rt-text").css({left:parseInt(a("#dragwrapper"+e).offset().left+h.textOffset)+"px"})}if(h.animateIntro){a("div:eq(2)",j).width(k);a("#dragwrapper"+e).css({right:"0px",opacity:1});setTimeout(function(){a("#dragwrapper"+e).animate({right:(k*h.introPosition)-(a("#dragwrapper"+e).width()/2)+"px"},h.introDuration,function(){a("#dragwrapper"+e).animate(1000)});a("div:eq(2)",j).width(k).animate({width:k*h.introPosition+"px"},h.introDuration,function(){n();h.onReady.call(this)})},h.introDelay)}else{n();h.onReady.call(this)}function n(){a(j).hover(function(){a("#dragwrapper"+e).animate({opacity:1},200)},function(){a("#dragwrapper"+e).animate({opacity:0.5},350)});a(j).one("mousemove",function(){a("#dragwrapper"+e).stop().animate({opacity:1},500)})}})}})})(jQuery);