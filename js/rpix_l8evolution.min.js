$("#submit-request").validator().on("valid.bs.validator",function(){$("#sendGIFrequest").removeClass("disabled")}).on("invalid.bs.validator",function(){$("#sendGIFrequest").addClass("disabled")});$("#sendGIFrequest").on("click",function(b){if(!$("#sendGIFrequest").hasClass("disabled")){ids=[];imOverlayGr.eachLayer(function(d){ids.push(d.options.id)});var a={uuid:scope.uuid,bands:$("#band-combination input[name='combination']:checked").attr("data"),mailto:$("#EmailRequest").val(),image_list:"["+ids+"]"};var c=$.post("{{ RPIX_API }}",JSON.stringify({info:a}));$("#myModal").modal("hide");$("#modalAPI").modal()}});$("#myModal").on("hidden.bs.modal",function(){$(this).find("form")[0].reset();scope.uuid=undefined});function initFilters(){$("#cloudCoverSlider").noUiSlider({start:[0,20],step:1,behaviour:"drag",connect:true,range:{min:0,max:100}});$("#cloudCoverSlider").noUiSlider_pips({mode:"positions",values:[0,25,50,75,100],density:4});$("#cloudCoverSlider").on("slide",setCloud);$("#cloudCoverSlider").on("set",updateCloud);$("#dateSlider").noUiSlider({range:{min:timestamp(scope.filtervalues.datestart),max:timestamp(scope.filtervalues.dateend)},connect:true,step:1*24*60*60*1000,format:wNumb({decimals:0}),start:[timestamp(scope.filtervalues.datestart),timestamp(scope.filtervalues.dateend)]});var b=Date.parse(scope.filtervalues.dateend)-Date.parse(scope.filtervalues.datestart);var a=[Date.parse(scope.filtervalues.datestart),Date.parse(scope.filtervalues.datestart)+b/4,Date.parse(scope.filtervalues.datestart)+2*b/4,Date.parse(scope.filtervalues.datestart)+3*b/4,Date.parse(scope.filtervalues.dateend)];$("#dateSlider").noUiSlider_pips({mode:"values",values:a,density:4,stepped:true});$("#dateSlider > .noUi-pips > .noUi-value").each(function(){$(this).html(new Date(Number($(this).html())).toISOString().slice(0,7))});$("#dateSlider").on("slide",setDate);$("#dateSlider").on("set",updateDate);$("#seasonSlider").noUiSlider({range:{min:0,max:4},margin:1,behaviour:"drag",connect:true,step:1,format:wNumb({decimals:0}),start:[0,4]});$("#seasonSlider").noUiSlider_pips({mode:"values",density:11,values:[0.5,1.5,2.5,3.5]});$("#seasonSlider > .noUi-pips > .noUi-value").each(function(){var c=["spring","summer","autumn","winter"];$(this).html(c[$(this).html()-1])});$("#seasonSlider").on("set",updateSeason);$("#cloud-filter").html('<i class="fa fa-cloud fa-2x"><hbut> : '+scope.filtervalues.cloudmin+"% - "+scope.filtervalues.cloudmax+"%</hbut></i>");$("#date-filter").html('<i class="fa fa-calendar-o fa-2x"><hbut> : '+scope.filtervalues.datestart+" - "+scope.filtervalues.dateend+"</hbut></i>")}function setCloud(){scope.filtervalues.cloudmin=parseInt($("#cloudCoverSlider").val()[0]);scope.filtervalues.cloudmax=parseInt($("#cloudCoverSlider").val()[1]);$("#cloud-filter").html('<i class="fa fa-cloud fa-2x"><hbut> : '+scope.filtervalues.cloudmin+"% - "+scope.filtervalues.cloudmax+"%</hbut></i>")}function updateCloud(){scope.filtervalues.cloudmin=parseInt($("#cloudCoverSlider").val()[0]);scope.filtervalues.cloudmax=parseInt($("#cloudCoverSlider").val()[1]);$("#cloud-filter").html('<i class="fa fa-cloud fa-2x"><hbut> : '+scope.filtervalues.cloudmin+"% - "+scope.filtervalues.cloudmax+"%</hbut></i>");updateMap(scope.center)}function setDate(){scope.filtervalues.datestart=new Date(Number($("#dateSlider").val()[0])).toISOString().slice(0,10);scope.filtervalues.dateend=new Date(Number($("#dateSlider").val()[1])).toISOString().slice(0,10);$("#date-filter").html('<i class="fa fa-calendar-o fa-2x"><hbut> : '+scope.filtervalues.datestart+" - "+scope.filtervalues.dateend+"</hbut></i>")}function updateDate(){scope.filtervalues.datestart=new Date(Number($("#dateSlider").val()[0])).toISOString().slice(0,10);scope.filtervalues.dateend=new Date(Number($("#dateSlider").val()[1])).toISOString().slice(0,10);$("#date-filter").html('<i class="fa fa-calendar-o fa-2x"><hbut> : '+scope.filtervalues.datestart+" - "+scope.filtervalues.dateend+"</hbut></i>");updateMap(scope.center)}function updateSeason(){var a=["spring","summer","autumn","winter"];scope.filtervalues.seasons=a.slice($("#seasonSlider").val()[0],$("#seasonSlider").val()[1]);updateMap(scope.center)}function resetFilters(){scope.filtervalues.cloudmin=0;scope.filtervalues.cloudmax=20;scope.filtervalues.datestart=new Date("2013-04-01").toISOString().slice(0,10);scope.filtervalues.dateend=new Date().toISOString().slice(0,10);scope.filtervalues.seasons=["spring","summer","autumn","winter"];$("#cloudCoverSlider").val([scope.filtervalues.cloudmin,scope.filtervalues.cloudmax]);var a=Date.parse(scope.filtervalues.dateend)-Date.parse(scope.filtervalues.datestart);$("#dateSlider").val([Date.parse(scope.filtervalues.datestart),Date.parse(scope.filtervalues.dateend)]);$("#seasonSlider").val([0,4]);$("#cloud-filter").html('<i class="fa fa-cloud fa-2x"><hbut> : '+scope.filtervalues.cloudmin+"% - "+scope.filtervalues.cloudmax+"%</hbut></i>");$("#date-filter").html('<i class="fa fa-calendar-o fa-2x"><hbut> : '+scope.filtervalues.datestart+" - "+scope.filtervalues.dateend+"</hbut></i>")}function toggleOpenFilter(a){switch(a){case"date":$("div.date-filter").toggleClass("display-none");$("div.cloud-filter").addClass("display-none");$("div.season-filter").addClass("display-none");break;case"cloud":$("div.cloud-filter").toggleClass("display-none");$("div.date-filter").addClass("display-none");$("div.season-filter").addClass("display-none");break;case"season":$("div.season-filter").toggleClass("display-none");$("div.cloud-filter").addClass("display-none");$("div.date-filter").addClass("display-none");break;case null:break}}function timestamp(a){return new Date(a).getTime()}function isInArray(b,a){return(b.indexOf(a)>=0)?true:false}function sortScenes(d,c){return Date.parse(d.acquisitionDate)-Date.parse(c.acquisitionDate)}function mod(b,a){return((b%a)+a)%a}function generateUUID(){var b=new Date().getTime();var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=(b+Math.random()*16)%16|0;b=Math.floor(b/16);return(e=="x"?d:(d&3|8)).toString(16)});return a}function getSeason(i,e){var b=moment(i,"YYYY-MM-DD");var j=b.dayOfYear();var f=b.year();var k=moment({year:f,month:2,day:21}).dayOfYear(),d=moment({year:f,month:5,day:21}).dayOfYear(),a=moment({year:f,month:8,day:22}).dayOfYear(),h=moment({year:f,month:11,day:21}).dayOfYear();var c=["spring","summer","autumn","winter"];if(e<0){c.reverse()}var g="";if(j<k||j>=h){g=c[3]}if(j>=k&&j<d){g=c[0]}if(j>=d&&j<a){g=c[1]}if(j>=a&&j<h){g=c[2]}return g}function cleanoverlays(){for(var a in map._layers){if(map._layers[a].hasOwnProperty("type")){if(map._layers[a].type==="l8overlay"){map.removeLayer(map._layers[a])}}}}function resetmap(){footprintGr.clearLayers();markerGr.clearLayers();imOverlayGr.clearLayers();if(typeof(sliderControl)!="undefined"){sliderControl.removeFrom(map);sliderControl=undefined}cleanoverlays();scope.center=undefined}function cleanmap(){footprintGr.clearLayers();markerGr.clearLayers();imOverlayGr.clearLayers();scope.uuid=undefined;if(typeof(sliderControl)!="undefined"){sliderControl.removeFrom(map);sliderControl=undefined}cleanoverlays()}function getDataAndUpdate(b){map.spin(true);cleanmap();var c=Math.floor((map.getCenter().lng+180)/360)*360;var a={};$.getJSON(b,function(v){var w=v.info.results.total;if(w<2000){for(var q=0;q<v.results.length;q++){var u={};u.rowpath=v.results[q].row+"-"+v.results[q].path;u.className=v.results[q].sceneID+"-"+v.results[q].row+"-"+v.results[q].path;u.acquisitionDate=v.results[q].acquisitionDate;u.browseAvailable=v.results[q].browseAvailable;u.browseURL=v.results[q].browseURL;u.cloudCover=v.results[q].cloudCover;u.cloudCoverFull=v.results[q].cloudCoverFull;u.dayOrNight=v.results[q].dayOrNight;u.noData=false;u.lat=v.results[q].sceneCenterLatitude;u.lon=v.results[q].sceneCenterLongitude;u.lon=u.lon+c;u.season=getSeason(u.acquisitionDate,u.lat);u.path=v.results[q].path;u.row=v.results[q].row;u.sceneID=v.results[q].sceneID;u.sensor=v.results[q].sensor;u.lowerLeftCornerLatitude=v.results[q].lowerLeftCornerLatitude;u.lowerRightCornerLatitude=v.results[q].lowerRightCornerLatitude;u.upperLeftCornerLatitude=v.results[q].upperLeftCornerLatitude;u.upperRightCornerLatitude=v.results[q].upperRightCornerLatitude;u.lowerLeftCornerLongitude=v.results[q].lowerLeftCornerLongitude;u.lowerRightCornerLongitude=v.results[q].lowerRightCornerLongitude;u.upperLeftCornerLongitude=v.results[q].upperLeftCornerLongitude;u.upperRightCornerLongitude=v.results[q].upperRightCornerLongitude;u.S3=(v.results[q].hasOwnProperty("S3"))?true:false;var m=Math.abs(u.lowerLeftCornerLongitude-u.lowerRightCornerLongitude);var e=Math.abs(u.upperLeftCornerLongitude-u.upperRightCornerLongitude);if((m>180)||(e>180)){if(u.lowerLeftCornerLongitude<0){u.lowerLeftCornerLongitude+=360}if(u.upperLeftCornerLongitude<0){u.upperLeftCornerLongitude+=360}if(u.lowerRightCornerLongitude<0){u.lowerRightCornerLongitude+=360}if(u.upperRightCornerLongitude<0){u.upperRightCornerLongitude+=360}}var g=["upperLeftCornerLongitude","upperRightCornerLongitude","lowerRightCornerLongitude","lowerLeftCornerLongitude"];for(var s=0;s<g.length;s++){u[g[s]]+=c}if((u.S3==true)&&(u.browseAvailable=="Y")&&(u.dayOrNight=="DAY")&&isInArray(scope.filtervalues.seasons,u.season)){var o=u.rowpath;if(a.hasOwnProperty(o)){a[o].push(u)}else{a[o]=[];a[o].push(u)}}}}var r={color:"#000",weight:2,fill:true,fillOpacity:0,opacity:1};var h={color:"#2262CC",weight:3,opacity:0.6,fill:true,fillOpacity:0.65,fillColor:"#2262CC"};var p=Object.keys(a);for(var q=0;q<p.length;q++){var n=a[p[q]][0];var j=L.latLng(n.lowerLeftCornerLatitude,n.lowerLeftCornerLongitude),d=L.latLng(n.lowerRightCornerLatitude,n.lowerRightCornerLongitude),l=L.latLng(n.upperLeftCornerLatitude,n.upperLeftCornerLongitude),f=L.latLng(n.upperRightCornerLatitude,n.upperRightCornerLongitude);var k=L.polygon([j,d,f,l],r).on("mouseover",function(){this.setStyle(h)}).on("mouseout",function(){this.setStyle(r)}).on("click",onClickRowPath);k.scenes=a[p[q]];k.id=p[q];var t=new L.DivIcon({html:"<div><span>"+k.scenes.length+"</span></div>",className:"marker-circle text-center",iconSize:new L.Point(30,30)});k.marker=new L.marker(k.getBounds().getCenter(),{icon:t,clickable:false,zIndexOffset:100,keyboard:false,opacity:0.5}).addTo(map);footprintGr.addLayer(k);markerGr.addLayer(k.marker)}if(p.length===0){$("div.h4noim").removeClass("display-none")}else{$("div.h4noim").addClass("display-none")}map.spin(false)}).fail(function(){$("div.h4noim").removeClass("display-none");map.spin(false)})}function onClickRowPath(){map.spin(true);imOverlayGr.clearLayers();if(typeof(sliderControl)!="undefined"){sliderControl.removeFrom(map);sliderControl=undefined}cleanoverlays();this.bringToBack();markerGr.eachLayer(function(i){i.setOpacity(0.5)});this.marker.setOpacity(0);var g=Math.floor((map.getCenter().lng+180)/360)*360;var b=this.scenes;b.sort(sortScenes);for(var d=0;d<b.length;d++){var e=b[d];var f=turf.polygon([[[e.upperLeftCornerLongitude,e.upperLeftCornerLatitude],[e.upperRightCornerLongitude,e.upperRightCornerLatitude],[e.lowerRightCornerLongitude,e.lowerRightCornerLatitude],[e.lowerLeftCornerLongitude,e.lowerLeftCornerLatitude],[e.upperLeftCornerLongitude,e.upperLeftCornerLatitude]]]);var j=turf.extent(f);var a=[[j[3],j[0]],[j[3],j[2]],[j[1],j[2]],[j[1],j[0]]];var c=[[e.upperLeftCornerLatitude,e.upperLeftCornerLongitude],[e.upperRightCornerLatitude,e.upperRightCornerLongitude],[e.lowerRightCornerLatitude,e.lowerRightCornerLongitude],[e.lowerLeftCornerLatitude,e.lowerLeftCornerLongitude],[e.upperLeftCornerLatitude,e.upperLeftCornerLongitude]];var k={attribution:"&copy Landsat imagery courtesy of NASA and USGS",id:e.sceneID,rp:e.rowpath,time:e.acquisitionDate,info:{date:e.acquisitionDate,cloud:e.cloudCover,sun:e.sunAzimuth},clip:c};var h=new L.ImageTransform(e.browseURL,a,k);h.type="l8overlay";imOverlayGr.addLayer(h)}sliderControl=L.control.sliderControl({position:"bottomleft",layer:imOverlayGr,follow:true,showAllOnStart:true,alwaysShowDate:true,rowpath:this.id,timeStrLength:10});map.addControl(sliderControl);sliderControl.startSlider();map.fitBounds(this.getBounds());map.spin(false)}function updateMap(b){if(typeof b==="undefined"){return}var f=(b.lat).toString(),h=(mod(b.lng+180,360)-180).toString(),e="upperLeftCornerLatitude:["+f+"+TO+1000]+AND+lowerRightCornerLatitude:[-1000+TO+"+f+"]",c="+AND+lowerLeftCornerLongitude:[-1000+TO+"+h+"]+AND+upperRightCornerLongitude:["+h+"+TO+1000]",a="+AND+cloudCoverFull:["+scope.filtervalues.cloudmin+"+TO+"+scope.filtervalues.cloudmax+"]",g="+AND+acquisitionDate:["+scope.filtervalues.datestart+"+TO+"+scope.filtervalues.dateend+"]",d=scope.api_url+e+c+g+a+"&limit=2000";getDataAndUpdate(d)}function update_map_uuid(c){map.spin(true);scope.uuid=c;var a="https://data.remotepixel.ca/gif/",b=a+c+".json",d=a+c+".gif";$.getJSON(b,function(j){var l={};l.coordinates=j.coordinates;l.id=j.id;var h=L.latLng(l.coordinates.south,l.coordinates.west),i=L.latLng(l.coordinates.north,l.coordinates.east),g=(((l.coordinates.east+180)+(l.coordinates.west+180))/2)-180,m=(((l.coordinates.north+90)+(l.coordinates.south+90))/2)-90,k='&copy Landsat imagery courtesy of NASA and USGS; <a href="https://remotepixel.ca/">RemotePixel</a>';var n=L.imageOverlay(d,L.latLngBounds(h,i),{attribution:k}).on("load",function(){map.spin(false)}).addTo(map);n.type="l8overlay";map.fitBounds(n._bounds);var o={color:"#000",weight:2,fill:true,fillOpacity:0,opacity:1};var e=L.latLngBounds(h,i),f=L.polygon([e.getNorthEast(),e.getNorthWest(),e.getSouthWest(),e.getSouthEast()],o);footprintGr.addLayer(f)}).fail(function(){map.spin(false)})}function update_map_ids(b){b=b.replace("[","");b=b.replace("]","");b=b.replace(","," ");var c="https://api.remotepixel.ca/landsat?search=sceneID("+b+")&limit=2000";map.spin(true);cleanmap();var a=[];$.getJSON(c,function(g){var k=g.info.results.total;if(k<2000){for(var h=0;h<g.results.length;h++){var j={};j.rowpath=g.results[h].row+"-"+g.results[h].path;j.acquisitionDate=g.results[h].acquisitionDate;j.browseAvailable=g.results[h].browseAvailable;j.lat=g.results[h].sceneCenterLatitude;j.lon=g.results[h].sceneCenterLongitude;j.browseURL=g.results[h].browseURL;j.cloudCover=g.results[h].cloudCover;j.cloudCoverFull=g.results[h].cloudCoverFull;j.dayOrNight=g.results[h].dayOrNight;j.path=g.results[h].path;j.row=g.results[h].row;j.sceneID=g.results[h].sceneID;j.lowerLeftCornerLatitude=g.results[h].lowerLeftCornerLatitude;j.lowerRightCornerLatitude=g.results[h].lowerRightCornerLatitude;j.upperLeftCornerLatitude=g.results[h].upperLeftCornerLatitude;j.upperRightCornerLatitude=g.results[h].upperRightCornerLatitude;j.lowerLeftCornerLongitude=g.results[h].lowerLeftCornerLongitude;j.lowerRightCornerLongitude=g.results[h].lowerRightCornerLongitude;j.upperLeftCornerLongitude=g.results[h].upperLeftCornerLongitude;j.upperRightCornerLongitude=g.results[h].upperRightCornerLongitude;var l=Math.abs(j.lowerLeftCornerLongitude-j.lowerRightCornerLongitude);var f=Math.abs(j.upperLeftCornerLongitude-j.upperRightCornerLongitude);if((l>180)||(f>180)){if(j.lowerLeftCornerLongitude<0){j.lowerLeftCornerLongitude+=360}if(j.upperLeftCornerLongitude<0){j.upperLeftCornerLongitude+=360}if(j.lowerRightCornerLongitude<0){j.lowerRightCornerLongitude+=360}if(j.upperRightCornerLongitude<0){j.upperRightCornerLongitude+=360}}a.push(j)}}a.sort(sortScenes);for(var h=0;h<a.length;h++){var j=a[h],m=turf.polygon([[[j.upperLeftCornerLongitude,j.upperLeftCornerLatitude],[j.upperRightCornerLongitude,j.upperRightCornerLatitude],[j.lowerRightCornerLongitude,j.lowerRightCornerLatitude],[j.lowerLeftCornerLongitude,j.lowerLeftCornerLatitude],[j.upperLeftCornerLongitude,j.upperLeftCornerLatitude]]]),o=turf.extent(m),d=[[o[3],o[0]],[o[3],o[2]],[o[1],o[2]],[o[1],o[0]]],e=[[j.upperLeftCornerLatitude,j.upperLeftCornerLongitude],[j.upperRightCornerLatitude,j.upperRightCornerLongitude],[j.lowerRightCornerLatitude,j.lowerRightCornerLongitude],[j.lowerLeftCornerLatitude,j.lowerLeftCornerLongitude],[j.upperLeftCornerLatitude,j.upperLeftCornerLongitude]],p={id:j.sceneID,time:j.acquisitionDate,attribution:"&copy Landsat imagery courtesy of NASA and USGS",info:{date:j.date,cloud:j.cloud},clip:e},n=new L.ImageTransform(j.browseURL,d,p);n.type="l8overlay";imOverlayGr.addLayer(n)}sliderControl=L.control.sliderControl({position:"bottomleft",layer:imOverlayGr,follow:true,showAllOnStart:true,alwaysShowDate:true,rowpath:this.id,timeStrLength:10});map.addControl(sliderControl);sliderControl.startSlider();map.fitBounds(imOverlayGr.getLayers()[0]._bounds);map.spin(false)}).fail(function(){map.spin(false)})}function getUrlVars(){var b={},a=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(c,d,e){b[d]=e});return b}var scope={uuid:"",api_url:"https://api.remotepixel.ca/landsat?search=",center:undefined,filtervalues:{cloudmin:0,cloudmax:20,datestart:new Date("2013-04-01").toISOString().slice(0,10),dateend:new Date().toISOString().slice(0,10),seasons:["spring","summer","autumn","winter"]}};var map=L.map("map",{center:[0,0],bounceAtZoomLimits:false,worldCopyJump:false,touchZoom:false,inertia:false,zoomControl:false,doubleClickZoom:"center",scrollWheelZoom:"center",minZoom:1,zoom:2,maxZoom:11});var osm_url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";var attribution='&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>';var OpenStreetMap=L.tileLayer(osm_url,{id:"MapID",attribution:attribution}).addTo(map);var mapLink='<a href="http://www.esri.com/">Esri</a>';var wholink="i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community";var esriWorld=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+mapLink+", "+wholink,maxZoom:18});var baseMaps={OpenStreetMap:OpenStreetMap,"ESRI-Satellite":esriWorld};L.control.zoom({position:"topright"}).addTo(map);L.control.layers(baseMaps,"",{position:"bottomright"}).addTo(map);var imOverlayGr=new L.layerGroup();var footprintGr=new L.featureGroup().addTo(map);var markerGr=new L.featureGroup().addTo(map);map.on("dragend",function(a){if(footprintGr.getLayers().length!=0){if(footprintGr.getBounds().contains(map.getCenter())){return}else{updateMap(map.getCenter())}}else{updateMap(map.getCenter())}scope.center=map.getCenter()});L.easyButton("fa-home",function(){resetmap();resetFilters();map.fitWorld()},"Reset");L.easyButton("fa-film",function(){if(imOverlayGr.getLayers().length!=0&&(typeof scope.uuid==="undefined")){scope.uuid=generateUUID();$("#myModalLabel").text("GIF Creation for Row-Path: "+imOverlayGr.getLayers()[0].options.rp);$("#uuid-text").text("Task ID: "+scope.uuid);$("#myModal").modal()}},"Gif Creation");L.easyButton("fa-share",function(){ids=[];imOverlayGr.eachLayer(function(b){ids.push(b.options.id)});if(ids.length!==0){var a="https://remotepixel.ca/projects/landsat8evolution.html?ids=["+ids+"]"}else{if(typeof scope.uuid!=="undefined"){var a=window.location.href}else{var a="https://remotepixel.ca/projects/landsat8evolution.html"}}$("#twitter").attr("href","https://twitter.com/share?url="+encodeURIComponent(a)+"&via=RemotePixel&hashtags=Landsat&related=NASA_Landsat&text=Landsat 8 - See how the world is changing");$("#linkedin").attr("href","https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(a)+"&title=Landsat 8 - See how the world is changing&source=https://remotepixel.ca");$("#facebook").attr("href","https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(a));$("#modalShare").modal()},"Share it");L.easyButton("fa-info",function(){$("#modalAbout").modal()},"About");$(document).ready(function(){initFilters();var a=getUrlVars();if(a.hasOwnProperty("uuid")){update_map_uuid(a.uuid)}else{if(a.hasOwnProperty("ids")){update_map_ids(a.ids)}else{$("#modalAbout").modal()}}});
