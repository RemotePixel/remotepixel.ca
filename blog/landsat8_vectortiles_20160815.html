<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<meta name="description" content="Satellite Search: Thank You">
	<meta name="author" content="Vincent Sarago">

	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="@RemotePixel" />
	<meta name="twitter:title" content="Blog | Mapbox Vector Tiles Experiment" />
	<meta name="twitter:description" content="Blog | Mapbox Vector Tiles Experiment" />
	<meta name="twitter:creator" content="@_VincentS_" />
	<meta name="twitter:image:src" content="https://remotepixel.ca/blog/img/prev_landsatmvt.jpg" />

	<meta property="og:title" content="Blog | Mapbox Vector Tiles Experiment" />
	<meta property="og:url" content="https://remotepixel.ca/blog/landsat8_vectortiles_20160815.html" />
	<meta property="og:image" content="https://remotepixel.ca/blog/img/prev_landsatmvt.jpg" />
	<meta property="og:description" content="Blog | Mapbox Vector Tiles Experiment" />
	<meta property="og:site_name" content="Remote Pixel" />

	<title>Blog | Mapbox Vector Tiles Experiment</title>

	<!-- Bootstrap Core CSS -->
	<link href="/css/bootstrap.min.css" rel="stylesheet">

	<!-- Custom CSS -->
	<link href="/css/rpix_general.min.css" rel="stylesheet">

	<!-- Custom CSS -->
	<link href="/css/rpix_blogpost.min.css" rel="stylesheet">

	<!-- Custom Fonts -->
	<link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
	    <![endif]-->
	<style>
		.topimage {
		    background: url(/img/groenland_L8.jpg) no-repeat bottom center scroll;
		    background-position: center;
		    background-size: cover;
		        -webkit-background-size: cover;
		        -moz-background-size: cover;
		        -o-background-size: cover;
		}
		.post-content{
			padding-top: 15px;
		}
	</style>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-60678866-1', 'auto');
        ga('send', 'pageview');
    </script>
</head>

<body id="page-top" data-target=".navbar-fixed-top">
	<!-- Navigation -->
	<nav class="navbar navbar-custom navbar-fixed-top top-nav-collapse" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target=".navbar-main-collapse">
					<i class="fa fa-bars" style="color: #fff"></i>
				</button>
				<a class="navbar-brand page-scroll"
					href="/blog/index.html#landsat8mvt"> <i
                    class="fa fa-play-circle"></i> <span class="light">back to Blog</span></a>
			</div>
			<!-- Collect the nav links, forms, and other content for toggling -->
			<div
				class="collapse navbar-collapse navbar-right navbar-main-collapse">
				<ul class="nav navbar-nav">
					<!-- Hidden li included to remove active class from about link when scrolled up past about section -->
					<li class="hidden"><a href="#page-top"></a></li>
                    <li><a class="glyphicon glyphicon-home" href="/"></a></li>
                    <li><a href="/projects/index.html">projects</a></li>
                    <li><a href="/blog/index.html">Blog</a></li>
                    <li><a href="/contact.html">Contact</a></li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container -->
	</nav>

    <a id="back-to-top" href="#page-top" class="display-none">
        <i class="fa fa-level-up"></i>
        back to top
    </a>

	<div class="entete-blog topimage">
		<div class="titre">
		    <h1>Landsat8 MVT: a Mapbox Vector Tiles Experiment</h1>
        </div>
		<div class="landsat_copyright">
			&copy; Landsat imagery courtesy of NASA Goddard Space Flight<br>
			Center and U.S. Geological Survey
		</div>
	</div>

	<div class="post-content">
        <div class="corps">

			<p>This is not a secret, I'm a big fan of Mapbox APIs and products.
				In my latest project (<a href="/projects/satellitesearch.html" target="_blank">Satellite Search</a>)
				I've been using Mapbox-GL to create a simple web interface to search for satellite data,
				and what made this project so simple? Using satellite footprint grid to select area of interest...
			</p>

			<p>Sentinel and Landsat footprint grids are made of thousand of elements
				covering all the land cover and interacting with each grid cell on a web page was something not possible two-three years ago.
				But that was before Mapbox created and openned <a href="https://www.mapbox.com/vector-tiles/" target="_blank">Vector Tiles</a>.</p>

			<p>On Mapbox <a href="https://www.mapbox.com/vector-tiles/" target="_blank">page</a> it says:
				<blockquote>Vector tiles make huge maps fast while offering full design
					flexibility. They are the vector data equivalent of image tiles
					for web mapping, applying the strengths of tiling – developed for caching,
					scaling and serving map imagery rapidly – to vector data.</blockquote>
			</p>

			<p>What is really important here is that you can have a huge vector dataset and make it available (and interactive) on a webpage via vector tiles.</p>

			<p>For <a href="/projects/satellitesearch.html" target="_blank">Satellite Search</a>
				I'm not only showing the grid but I'm using Mapbox GL API to query
				each cell information (PATH-ROW combination) under a mouse click,
				then I'm using DeveloppmentSeed <a href="https://github.com/sat-utils" target="_blank">sat-utils</a> to retrieve available images.
				This work fine and <a href="/projects/satellitesearch.html" target="_blank">Satellite Search</a> is by far the most visited RemotePixel.ca page.</p>

			<p>Storing Path-Row information on every cell was simple and usefull in
				combination to the sat-api, but I wanted to push things a bit more:
				<strong>Could we store every Landsat image metadata on the grid cells and by-pass the external API call ?</strong> </p>

			<p>For this experiment I forked Satellite Search and created <a href="/projects/landsat8mvt.html" target="_blank">Landsat 8 MVT</a> project.</p>

			<p>When looking for satellite imagery there are two importants filters you whant to use:
				Cloud % and Dates. So I created a Landsat 8 footprint grid with those two variables
				(in addition to the path & row).</p>

			<p>How To: </p>
			<ul>
				<li>Get Landsat Metadata (http://landsat.usgs.gov//metadatalist.php)</li>
				<li>Get Landsat WRS2 vector (http://landsat.usgs.gov//tools_wrs-2_shapefile.php) and filter to get only descending orbits</li>
				<li>Create a new WRS2 vector file with two new entries: Cloud % and Dates (array) using a python script</li>
				<li>Transform the vector file to Mapbox vector tiles with tippecanoe</li>
			</ul>

			<p>By using Mapbox-gl API and those new Vector tiles I can now get all the images dates and cloud coverage on each cell.</p>

			<img class="img-responsive" src="/blog/img/landsatmvt_20160815/elem_info.gif">

			<p>With this trick I removed all sat-api calls and landsat search is now faster.
				You can even filter the Landsat-8 grid based on Cloud % and Date.</p>

			<img class="img-responsive" src="/blog/img/landsatmvt_20160815/help_landsatmvt.gif">
			<titre-img>Landsat 8 MVT</titre-img>

			<p>Not optimized, not mobile friendly, remember this is an <strong>Experiment</strong></p>
			<ul>
				<li>Tiles are heavier</li>
				<li>I cannot create low level zoom due to tiles size</li>
				<li>Cloud and Dates filters are heavy client side processing (e.g. I cannot automatically filter vector tiles when moving the map)</li>
				<li>Landsat ID are not strait forward from dates "LC8007030<strong>2014202</strong>LGN00", latest two digit can change, so I may need to store Scene ID instead of dates</li>
			</ul>

		</div>

	    <ul class="info-blogpost">
		    <li>Date: August 2016</li>
			<li>Category: Landsat / Vector Tiles</li>
		</ul>

        <!-- Footer -->
        <footer>
            <div class="text-center">
                <a id="twitter" class="sharebutt" href="" title="Share on Twitter" target="_blank">
                    <i class="fa fa-twitter"></i>
                </a>

                <a id="linkedin" class="sharebutt" href="" title="Share on LinkedIn" target="_blank">
                    <i class="fa fa-linkedin"></i>
                </a>

                <a id="facebook" class="sharebutt" href="" title="Share on Facebook" target="_blank">
                    <i class="fa fa-facebook"></i>
                </a>

            </div>
        </footer>

	</div> <!-- /post-content -->

	<!-- jQuery -->
	<script src="/js/jquery.js"></script>
    <script src="/js/jquery.easing.min.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script src="/js/bootstrap.min.js"></script>

	<!-- general Theme JavaScript -->
	<script src="/js/rpix_blogpost.js"></script>
    <script>
        $( document ).ready(function() {
            $("#twitter").attr('href','http://twitter.com/share?text=' + document.title.replace('|', '%7C') + '&url=' + window.location.href + '&via=RemotePixel');
            $("#linkedin").attr('href','http://www.linkedin.com/shareArticle?mini=true&url=' + window.location.href + '&title='+ document.title + '&source=https://remotepixel.ca');
            $("#facebook").attr('href','https://www.facebook.com/sharer/sharer.php?u=' + window.location.href);
        });
    </script>

</body>
</html>
